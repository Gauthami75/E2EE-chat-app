{"ast":null,"code":"import _toConsumableArray from\"/home/saumya/Projects/Assignment/client/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _slicedToArray from\"/home/saumya/Projects/Assignment/client/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import ChatArea from\"./Components/ChatArea/ChatArea\";import InfoArea from\"./Components/InfoArea/InfoArea\";import UtilsArea from\"./Components/UtilsArea/UtilsArea\";import JoinRoom from\"./Components/JoinRoom/JoinRoom\";import React,{useRef,useEffect,useState}from'react';import{Helmet}from'react-helmet';import socket from\"./Utils/socket\";import\"./CSS/App.css\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var _require=require(\"./Utils/ECDH\"),ECDH=_require.ECDH;function App(){console.log(\"Rendering.... APP\");var ecdh=useRef(new ECDH());var _useState=useState(socket.id),_useState2=_slicedToArray(_useState,2),room=_useState2[0],setRoom=_useState2[1];var _useState3=useState([\"\",\"\",false]),_useState4=_slicedToArray(_useState3,2),info=_useState4[0],setInfo=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),status=_useState6[0],setStatus=_useState6[1];var addStatus=function addStatus(content){setStatus(function(STATUS){return[].concat(_toConsumableArray(STATUS),[content]);});};// On Mounting\nuseEffect(function(){socket.on(\"NEW_CONNECTION\",function(){socket.emit(\"PUBLIC_KEY\",ecdh.current.getPublicKey());addStatus(\"Sent your public Key\");addStatus(\"NEW USER JOINED\");});socket.on(\"ROOM_JOINED\",function(room){addStatus(\"SUCCESSFULLY JOINED : \".concat(room));addStatus(\"Sent your public Key : \".concat(ecdh.current.getPublicKey()));socket.emit(\"PUBLIC_KEY\",ecdh.current.getPublicKey());});socket.on(\"PUBLIC_KEY\",function(publicKey){console.log(\"PUBLIC KEY\");setInfo([publicKey,ecdh.current.getSecretKey(publicKey),true]);addStatus(\"Public Key Received : \".concat(publicKey));});socket.on(\"USER_DISCONNECTED\",function(){console.log(\"USER DISCONNCTED\");setInfo([\"\",\"\",false]);addStatus(\"USER DISCONNECTED\");});socket.on(\"ROOM_LEFT\",function(room){addStatus(\"You Left \".concat(room));});socket.on(\"ROOM_FULL\",function(room){console.log(\"ROOM FULL\");addStatus(\"\".concat(room,\" is FULL!! Please Try another Room\"));});socket.on('INTRUSION_ATTEMPT',function(room){console.log(\"INTRUSION ATTEMPTED\");addStatus(\"Intruder tried to join\");});},[]);var _joinRoom=function joinRoom(roomName){if(roomName===room){addStatus(\"You are already in \".concat(roomName));return;}else{setRoom(roomName);setInfo([\"\",\"\",false]);socket.emit(\"JOIN\",roomName);}};return/*#__PURE__*/_jsxs(\"div\",{className:\"container\",children:[/*#__PURE__*/_jsx(Helmet,{children:/*#__PURE__*/_jsx(\"title\",{children:\"One-to-One-E2EE-Chat-App\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"left\",children:/*#__PURE__*/_jsx(ChatArea,{ecdh:ecdh.current,friendOnline:info[2]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"right\",children:[/*#__PURE__*/_jsx(JoinRoom,{joinRoom:function joinRoom(event){_joinRoom(event);}}),/*#__PURE__*/_jsx(InfoArea,{status:status}),/*#__PURE__*/_jsx(UtilsArea,{ecdh:ecdh.current,secretKey:info[1],friendPublicKey:info[0]})]})]});}export default App;","map":{"version":3,"sources":["/home/saumya/Projects/Assignment/client/src/App.js"],"names":["ChatArea","InfoArea","UtilsArea","JoinRoom","React","useRef","useEffect","useState","Helmet","socket","require","ECDH","App","console","log","ecdh","id","room","setRoom","info","setInfo","status","setStatus","addStatus","content","STATUS","on","emit","current","getPublicKey","publicKey","getSecretKey","joinRoom","roomName","event"],"mappings":"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","sourcesContent":["import ChatArea from \"./Components/ChatArea/ChatArea\";\nimport InfoArea from \"./Components/InfoArea/InfoArea\";\nimport UtilsArea from \"./Components/UtilsArea/UtilsArea\";\nimport JoinRoom from \"./Components/JoinRoom/JoinRoom\";\nimport React, {useRef, useEffect, useState} from 'react';\nimport { Helmet } from 'react-helmet'\nimport socket from \"./Utils/socket\";\nimport \"./CSS/App.css\";\n\nconst { ECDH } = require(\"./Utils/ECDH\");\n\nfunction App() {\n\n  console.log(\"Rendering.... APP\")\n\n  const ecdh = useRef(new ECDH());\n\n  const [room, setRoom] = useState(socket.id)\n\n  const [info, setInfo] = useState([\"\", \"\", false])\n\n  const [status, setStatus] = useState([])\n\n  const addStatus = (content)=>{\n    setStatus((STATUS)=>[\n        ...STATUS, content\n    ]) \n  }\n\n  // On Mounting\n  useEffect(()=>{\n\n    socket.on(\"NEW_CONNECTION\", ()=>{\n      socket.emit(\"PUBLIC_KEY\", ecdh.current.getPublicKey())\n      addStatus(`Sent your public Key`)\n      addStatus(`NEW USER JOINED`)\n    })\n  \n    socket.on(\"ROOM_JOINED\", (room)=>{\n      addStatus(`SUCCESSFULLY JOINED : ${room}`)\n      addStatus(`Sent your public Key : ${ecdh.current.getPublicKey()}`)\n      socket.emit(\"PUBLIC_KEY\", ecdh.current.getPublicKey())\n    })\n  \n    socket.on(\"PUBLIC_KEY\", (publicKey)=>{\n      console.log(\"PUBLIC KEY\")\n      setInfo([publicKey, ecdh.current.getSecretKey(publicKey), true])\n      addStatus(`Public Key Received : ${publicKey}`)\n    })\n  \n    socket.on(\"USER_DISCONNECTED\", ()=>{\n      console.log(\"USER DISCONNCTED\")\n      setInfo([\"\", \"\", false])\n      addStatus(`USER DISCONNECTED`)\n    })\n\n    socket.on(\"ROOM_LEFT\", (room)=>{\n      addStatus(`You Left ${room}`)\n    })\n  \n    socket.on(\"ROOM_FULL\", (room)=>{\n        console.log(\"ROOM FULL\")\n        addStatus(`${room} is FULL!! Please Try another Room`)\n    })\n  \n    socket.on('INTRUSION_ATTEMPT', (room)=>{\n        console.log(\"INTRUSION ATTEMPTED\")\n        addStatus(`Intruder tried to join`)\n    })\n\n  }, [])\n\n\n  const joinRoom  = (roomName)=>{\n    if(roomName===room){\n      addStatus(`You are already in ${roomName}`)\n      return\n    }\n    else{\n      setRoom(roomName)\n      setInfo([\"\", \"\", false])\n      socket.emit(\"JOIN\", roomName)\n    }\n  }\n\n  return (\n    <div className=\"container\">\n      {/* For Title of Page */}\n      <Helmet>\n          <title>One-to-One-E2EE-Chat-App</title>\n      </Helmet>\n      <div className=\"left\">\n        <ChatArea ecdh={ecdh.current} friendOnline={info[2]}/>\n      </div>  \n      <div className=\"right\">\n        <JoinRoom joinRoom={(event) => {\n            joinRoom(event)\n          }}/>\n        <InfoArea status={status}/>\n        <UtilsArea ecdh={ecdh.current} secretKey={info[1]} friendPublicKey={info[0]}/>\n      </div>\n    </div>\n  );\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}